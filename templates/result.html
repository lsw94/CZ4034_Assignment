{% extends 'base.html' %}


{% block content %}
    <script type="text/javascript">
        $(document).ready()
        {
             $("#filtersForm").submit();

            $('input[type="checkbox"]').click(function () {
                
            })
        }
               /* if ($(this).is(':checked')) {

                    $("#filtersForm").submit();

                }

            });*/

        function submitFilter() {
             alert("test");
            /*var formData = new FormData();
            $('#filtersForm input[type="checkbox"]').each(function () {
               if ($(this).is(':checked')) {
                   var name = $(this).attr('name');
                   formData.append("filters[]", name);
               }
            });

            $.ajax({
                type: 'post',
                url: window.location.href,
                data: formData,
                success: function (response) {
                    $('#success__para').html("You have submitted successfully");
                }
            });

            return false;*/
        }
    </script>
    <style>
        .top-positioning {
            margin-left: 11%;
            margin-top: 3%;
        }

        .results-positioning {
            margin-left: 11%;
            margin-top: 3%;
        }

        .filter-positioning {
            margin-top: 1%;
        }

        .filter-wording {
            margin-left: 9%;
        }

    </style>

    <div class="row top-positioning">

        <form class="form-check-inline col-lg-5 col-md-6" method="get" action=".">
            {{ form }}
            <button class="btn btn-outline-success" type="submit">Search</button>

        </form>

    </div>

    <nav class="navbar navbar-expand-lg navbar-light filter-positioning">
        {#  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">#}
        {#    <span class="navbar-toggler-icon"></span>#}
        {#  </button>#}

        <div class="navbar-collapse filter-wording" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Filter
                    </a>

                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">

                        <div class="container" style="margin-top: 1%">
                            <span class="text-uppercase" style="margin-left:20px; color: #28a745">Categories</span>
                            <form id="filtersForm" method="post" class="row" style="margin-top:1%">
                            {% csrf_token %}
                                {% for item in filter %}
                                    {% if forloop.counter == 1 or forloop.counter == 6 or forloop.counter == 11 or forloop.counter == 16 %}
                                        <div class="col-md-3">
                                        <ul class="nav flex-column">
                                    {% endif %}
                                <li class="nav-item"> {{ item }} {{ item.label }} </li>

                                {% if forloop.counter == 5 or forloop.counter == 10 or forloop.counter == 15 or forloop.counter == 20 %}
                                    </ul></div>
                                {% endif %}
                                {% endfor %}
                            </form>

                        </div>

                    </div>
                </li>
            </ul>
        </div>
    </nav>
    <hr>
    {% for abc in results %}
        <div class="row results-positioning">
            {{ abc }}</div>
    {% endfor %}

    <p id="success_para" ></p>

{% endblock %}
